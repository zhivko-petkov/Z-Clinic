<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">


<head th:fragment="head">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>Z-Clinic</title>
</head>

<nav th:fragment="navbar" class="navbar navbar-expand-lg bg-primary navbar-primary">
    <div class="container">
        <a href="/" class="navbar-brand text-light"><strong>Z-Clinic</strong></a>

        <button class="navbar-toggler bg-warning" type="button" data-bs-toggle="collapse"
                data-bs-target="#navigation-menu">

            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navigation-menu">
            <!-- Left -->
            <ul class="navbar-nav mr-auto">

                <li class="nav-item">
                    <a href="/" class="nav-link text-light">Home</a>
                </li>
                <li class="nav-item">
                    <a href="/tests" class="nav-link text-light">Tests</a>
                </li>
                <li class="nav-item">
                    <a href="/doctors" class="nav-link text-light">Doctors</a>
                </li>

                <li class="nav-item">
                    <a href="/news" class="nav-link text-light">News</a>
                </li>



                <li class="nav-item dropdown" sec:authorize="hasRole('ADMIN')">
                    <a class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdownAdmin" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Admin
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownAdmin">
                        <li><a class="dropdown-item" href="/users">Users</a></li>
                        <li><a class="dropdown-item" href="/tests">Tests</a></li>
                        <li><a class="dropdown-item" href="/news">News</a></li>
                        <li><a class="dropdown-item" href="/orders">Orders</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown" sec:authorize="hasAnyRole('ROLE_MODERATOR','ROLE_DOCTOR')">

                    <a sec:authorize="hasAnyRole('ROLE_MODERATOR')" class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdownModerator" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Moderator
                    </a>

                    <a sec:authorize="hasAnyRole('ROLE_DOCTOR')" class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdownDoctor" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Doctor
                    </a>

                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownModerator">
                        <li><a class="dropdown-item" href="/users">Users</a></li>
                        <li><a class="dropdown-item" href="/orders">Orders</a></li>
                    </ul>

                </li>

                <li class="nav-item">
                    <a href="/questions" class="nav-link text-light">Questions</a>
                </li>
                <li class="nav-item">
                    <a href="/about" class="nav-link text-light">About</a>
                </li>
            </ul>

            <!-- Right -->
            <ul class="navbar-nav ms-auto">
                <li class="nav-item" sec:authorize="!isAuthenticated()">
                    <a href="/users/login" class="nav-link text-light">Login</a>
                </li>
                <li class="nav-item" sec:authorize="!isAuthenticated()">
                    <a href="/users/register" class="nav-link text-light">Register</a>
                </li>

                <!-- Avatar -->
                <div class="dropdown" sec:authorize="isAuthenticated()">
                    <a
                            class="nav-link dropdown-toggle text-light"
                            href="#"
                            id="navbarDropdownMenuAvatar"
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-expanded="false">
                        <img th:src="${userPhoto}" class="rounded-circle" height="25" alt=""  loading="lazy"
                        />
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuAvatar">
                        <li><a class="dropdown-item" href="/users/profile">Account</a></li>
                        <li><a class="dropdown-item" href="/orders/loggedUser">Tests</a></li>
                        <li class="dropdown-item">
                            <form th:action="@{/users/logout}" th:method="post">
                                <input class="btn btn-link nav-link text-light bg-danger" type="submit" value="Logout">
                            </form>
                        </li>
                    </ul>
                </div>

                <div sec:authorize="isAuthenticated()">
                    <a href="/cart" class="nav-link text-light" >
                        <i class="bi bi-bag"></i>
                    </a>
                </div>
            </ul>
        </div>


    </div>

    <!--
    <ul class="navbar-nav ms-auto">
      <form class="d-flex">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-warning" type="submit">Search</button>
      </form>
    </ul> -->

</nav>

<footer th:fragment="footer" class="p-5 bg-primary text-white text-center position-relative">
    <div class="container">
        <p class="lead">Copyright &copy; 2022 Z-Clinic</p>

        <a href="#" class="position-absolute bottom-0 end-0 p-5">
            <i class="bi bi-arrow-up-circle h1"></i>
        </a>
    </div>
</footer>

</html>

